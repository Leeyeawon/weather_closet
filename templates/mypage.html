{% extends "base.html" %}
{% block title %}프로필{% endblock %}
{% block head %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/mypage.css') }}">
{% endblock %}

{% block topbar %}
<div class="topbar__left">
  <a class="icon-btn" href="{{ url_for('index') }}" aria-label="뒤로">
    <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
      <path d="M15 18l-6-6 6-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>
  </a>
</div>
<div class="topbar__title">마이페이지</div>
<div class="topbar__right"></div>
{% endblock %}

{% block content %}

<!-- 프로필 카드 -->
<section class="card profile">
  <img class="avatar" src="{{ data.user.avatar }}" alt="프로필 이미지">
  <div class="pmeta">
    <div class="pname">{{ data.user.name }}</div>
    <div class="psub">스타일 프로필</div>
  </div>

  <div class="grid">
    <div class="row">
      <div class="label">체감온도</div>
      <div class="tags">
        <span class="tag">{{ data.user.temp_tag }}</span>
      </div>
    </div>

    <div class="row">
      <div class="label">스타일</div>
      <div class="tags">
        {% for t in data.user.styles %}
        <span class="tag">{{ t }}</span>
        {% endfor %}
      </div>
    </div>

    <div class="row">
      <div class="label">회피 아이템</div>
      <div class="tags">
        {% for t in data.user.avoid %}
        <span class="tag">{{ t }}</span>
        {% endfor %}
      </div>
    </div>
  </div>
</section>

<!-- 회피 의상 관리 -->
<section class="card">
  <div class="card-hd">
    <div class="card-title">회피 의상 관리</div>
    <button class="link-btn" type="button" data-toast="편집 모드!">편집</button>
  </div>

  <div class="pill-row" id="avoidPills">
    {% for it in data.avoid_manage %}
    <span class="pill">
      {{ it }}
      <button class="pill-x" type="button" aria-label="삭제" data-remove-pill>✕</button>
    </span>
    {% endfor %}
  </div>

  <form class="addbar" id="avoidAddForm">
    <button class="addbar__icon" type="submit" aria-label="추가">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
        <path d="M12 5v14M5 12h14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
      </svg>
    </button>
    <input class="addbar__input" id="avoidInput" placeholder="회피 아이템 추가 (예: 민소매)" autocomplete="off">
    <button class="addbar__btn" type="submit">추가</button>
  </form>
</section>

<!-- 취향(스타일) 설정 -->
<section class="card">
  <div class="card-hd">
    <div class="card-title">취향(스타일) 설정</div>
  </div>

  <!-- 1) 캐주얼 ~ 포멀 -->
  <div class="slider-block">
    <div class="slider-top">
      <span class="s-left">캐주얼</span>
      <span class="s-right">포멀</span>
    </div>
    <input
      type="range"
      min="0" max="100"
      value="{{ data.sliders.casual_formal }}"
      class="slider"
      id="s1"
    >
  </div>

  <!-- 2) 심플 ~ 러블리 -->
  <div class="slider-block">
    <div class="slider-top">
      <span class="s-left">심플</span>
      <span class="s-right">러블리</span>
    </div>
    <input
      type="range"
      min="0" max="100"
      value="{{ data.sliders.simple_lovely }}"
      class="slider"
      id="s2"
    >
  </div>

  <div class="hint">
    현재 설정: <b id="sliderHint"></b>
  </div>
</section>

<!-- 건강 상태 설정 -->
<section class="card">
  <div class="card-hd">
    <div class="card-title">건강 상태 설정</div>
  </div>

  <div class="checklist">
    {% for item in data.health %}
    <label class="checkrow">
      <span class="checktext">{{ item.label }}</span>
      <input type="checkbox" {% if item.checked %}checked{% endif %}>
      <span class="checkui"></span>
    </label>
    {% endfor %}
  </div>
</section>

<!-- 보유 보조 아이템 -->
<section class="card">
  <div class="card-hd">
    <div class="card-title">보유 보조 아이템</div>
  </div>

  <div class="checklist">
    {% for item in data.aids %}
    <label class="checkrow">
      <span class="checktext">{{ item.label }}</span>
      <input type="checkbox" {% if item.checked %}checked{% endif %}>
      <span class="checkui"></span>
    </label>
    {% endfor %}
  </div>
</section>

<!-- 알림 설정 -->
<section class="card">
  <div class="card-hd">
    <div class="card-title">알림 설정</div>
  </div>

  <div class="checklist">
    {% for item in data.notify %}
    <label class="checkrow">
      <span class="checktext">{{ item.label }}</span>
      <input type="checkbox" {% if item.checked %}checked{% endif %}>
      <span class="checkui"></span>
    </label>
    {% endfor %}
  </div>
</section>

{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/mypage.js') }}"></script>
{% endblock %}
